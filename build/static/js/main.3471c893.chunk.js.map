{"version":3,"sources":["services/phonebook.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Entry","props","name","number","onClick","handler","Entries","names","handleDelete","map","entry","Filter","value","onChange","FormInput","text","AddForm","onSubmit","values","functions","type","Notification","message","notificationStyle","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","style","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","newSearch","setNewSearch","notification","setNotification","useEffect","console","log","phonebookService","initialEntries","namesToShow","filter","toLowerCase","includes","event","target","preventDefault","window","confirm","find","person","changedEntry","updatedEntry","setTimeout","catch","error","n","personObject","returnedEntry","concat","updatedBook","entries","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"8MACMA,EAAU,cAuBD,EApBA,WAEb,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAkB5B,EAfA,SAAAC,GAEb,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAa5B,EAVA,SAACG,EAAIF,GAElB,OADgBL,IAAMQ,IAAN,UAAaT,EAAb,YAAwBQ,GAAMF,GAC/BH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAQ5B,EALA,SAACG,GAEZ,OADgBP,IAAMS,OAAN,UAAiBV,EAAjB,YAA4BQ,IAC7BL,MAAK,SAAAC,GAAQ,OAAIA,EAASC,S,OClBvCM,EAAQ,SAACC,GACb,OACE,gCACGA,EAAMC,KACP,yCACCD,EAAME,OACP,yCACA,wBAAQD,KAAMD,EAAMJ,GAAIO,QAASH,EAAMI,QAAvC,wBAKAC,EAAU,SAAC,GAA0B,IAAzBC,EAAwB,EAAxBA,MAAMC,EAAkB,EAAlBA,aACtB,OACE,8BACGD,EAAME,KAAI,SAACC,GAAD,OAAW,cAAC,EAAD,CAAwBR,KAAMQ,EAAMR,KAAMC,OAAQO,EAAMP,OAAQN,GAAIa,EAAMb,GAAIQ,QAASG,GAA3EE,EAAMR,YAKxCS,EAAS,SAACV,GACd,OACI,2DAAqB,uBACrBW,MAAOX,EAAMW,MACbC,SAAUZ,EAAMY,eAMhBC,EAAY,SAAC,GAA0B,IAAzBC,EAAwB,EAAxBA,KAAKH,EAAmB,EAAnBA,MAAMP,EAAa,EAAbA,QAC7B,OACE,gCACGU,EADH,KACU,uBACRH,MAAOA,EACPC,SAAUR,QAMVW,EAAU,SAACf,GACf,OACE,uBAAMgB,SAAUhB,EAAMgB,SAAtB,UACE,cAAC,EAAD,CAAWF,KAAK,OACZH,MAAOX,EAAMiB,OAAOhB,KACpBG,QAASJ,EAAMkB,UAAUjB,OAE7B,cAAC,EAAD,CAAWa,KAAK,SACZH,MAAOX,EAAMiB,OAAOf,OACpBE,QAASJ,EAAMkB,UAAUhB,SAE7B,8BACE,wBAAQiB,KAAK,SAAb,uBAMFC,EAAe,SAAC,GAAsB,IAApBD,EAAmB,EAAnBA,KAAKE,EAAc,EAAdA,QACrBC,EAAoB,CACxBC,MAAOJ,EAAO,MAAQ,QACtBK,WAAY,YACZC,SAAU,GACVC,YAAa,QACbC,aAAc,EACdC,QAAS,GACTC,aAAc,IAEhB,OAAgB,OAAZR,EACK,KAIP,qBAAKS,MAAOR,EAAZ,SACGD,KA4JQU,EAvJH,WACV,MAAgCC,mBAAS,IAAzC,mBAAQC,EAAR,KAAiBC,EAAjB,KACA,EAAgCF,mBAAS,IAAzC,mBAAQG,EAAR,KAAiBC,EAAjB,KACA,EAAoCJ,mBAAS,IAA7C,mBAAQK,EAAR,KAAmBC,EAAnB,KACA,EAAoCN,mBAAS,IAA7C,mBAAQO,EAAR,KAAmBC,EAAnB,KACA,EAA0CR,mBAAS,CAAC,KAAK,OAAzD,mBAAQS,EAAR,KAAsBC,EAAtB,KAEAC,qBAAU,WACRC,QAAQC,IAAI,UACZC,IAEGvD,MAAK,SAAAwD,GACJb,EAAWa,QAEd,IAEH,IAAMC,EAA4B,KAAdT,EAChBN,EACAA,EAAQgB,QAAQ,SAACxC,GACjB,OAAOA,EAAMR,KAAKiD,cAAcC,SAASZ,EAAUW,kBAmGvD,OACE,gCACE,2CACA,cAAC,EAAD,CAAc/B,KAAMsB,EAAa,GAAIpB,QAASoB,EAAa,KAC3D,cAAC,EAAD,CAAQ9B,MAAO4B,EACX3B,SA3Fa,SAACwC,GACpBR,QAAQC,IAAIO,EAAMC,OAAO1C,OACzB6B,EAAaY,EAAMC,OAAO1C,UA4FxB,2CAEA,cAAC,EAAD,CAASK,SA9EG,SAACoC,GAKf,GAHAA,EAAME,iBAGFrB,EAAQzB,KAAI,SAACC,GAAD,OAAWA,EAAMR,QAAMkD,SAAShB,GAE9C,GAAIoB,OAAOC,QAAP,UAAkBrB,EAAlB,qFACH,CAEC,IAAM1B,EAAQwB,EAAQwB,MAAK,SAACC,GAAD,OAAYA,EAAOzD,OAASkC,KACjDwB,EAAY,2BAAOlD,GAAP,IAAcP,OAAQmC,IAExCS,EACUa,EAAa/D,GAAG+D,GACvBpE,MAAM,SAAAqE,GACL1B,EAAWD,EAAQzB,KAAI,SAAAkD,GAAM,OAAIA,EAAOzD,OAASkC,EAAUuB,EAASE,MACpExB,EAAW,IACXE,EAAa,IACbI,EAAgB,CAAC,EAAD,+BAA2BiB,EAAa1D,QACxD4D,YAAW,WACTnB,EAAgB,CAAC,KAAK,SACrB,QAEJoB,OAAM,SAAAC,GAEL7B,EAAWD,EAAQgB,QAAO,SAAAe,GAAC,OAAIA,EAAE/D,OAASkC,MAE1CC,EAAW,IACXE,EAAa,IAEbI,EAAgB,CAAC,EAAD,yBAAqBiB,EAAa1D,KAAlC,2CAChB4D,YAAW,WACTnB,EAAgB,CAAC,KAAK,SACrB,aAKPN,EAAW,IACXE,EAAa,QAGb,CAEF,IAAM2B,EAAe,CACnBhE,KAAMkC,EACNjC,OAAQmC,GAGVS,EACUmB,GACP1E,MAAK,SAAA2E,GAEJhC,EAAWD,EAAQkC,OAAOD,IAE1B9B,EAAW,IACXE,EAAa,IACbI,EAAgB,CAAC,EAAD,6BAAyBuB,EAAahE,QACtD4D,YAAW,WACTnB,EAAgB,CAAC,KAAK,SACrB,UAkBHzB,OACE,CACEhB,KAAKkC,EACLjC,OAAOmC,GAGXnB,UACE,CACEjB,KAnHU,SAACmD,GACrBR,QAAQC,IAAIO,EAAMC,OAAO1C,OACzByB,EAAWgB,EAAMC,OAAO1C,QAkHdT,OA/GY,SAACkD,GACvBR,QAAQC,IAAIO,EAAMC,OAAO1C,OACzB2B,EAAac,EAAMC,OAAO1C,WAkHxB,yCAEA,cAAC,EAAD,CAASL,MAAO0C,EAAazC,aA5GZ,SAAC6C,GACpBR,QAAQC,IAAIO,EAAMC,OAAOpD,MACrBsD,OAAOC,QAAP,0CAAkDvB,EAAQwB,MAAK,SAAAC,GAAM,OAAIA,EAAO9D,IAAMwD,EAAMC,OAAOpD,QAAMA,KAAzG,OACF6C,EACUM,EAAMC,OAAOpD,MAEpBV,MAAM,WACL,IAAM6E,EAAcnC,EAAQgB,QAAO,SAACoB,GAAD,OAAaA,EAAQzE,IAAMwD,EAAMC,OAAOpD,QAC3EiC,EAAWkC,aC3HrBE,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.3471c893.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = 'api/persons' //relative url, can use because the build is in the same place as backend\n// const baseUrl = 'http://localhost:3001/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n    const request = axios.delete( `${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, remove }","import React, { useState, useEffect } from 'react'\nimport phonebookService from './services/phonebook';\n\nconst Entry = (props) => {\n  return (\n    <div>\n      {props.name} \n      <> </>\n      {props.number}\n      <> </>\n      <button name={props.id} onClick={props.handler}>delete</button>\n    </div>\n  )\n}\n\nconst Entries = ({names,handleDelete}) => {\n  return (\n    <div>\n      {names.map((entry) => <Entry key={entry.name} name={entry.name} number={entry.number} id={entry.id} handler={handleDelete} />)}\n    </div>\n  )\n}\n\nconst Filter = (props) => {\n  return (\n      <> filter shown with <input\n      value={props.value}\n      onChange={props.onChange} \n      /> \n      </>\n  )\n}\n\nconst FormInput = ({text,value,handler}) => {\n  return (\n    <div>\n      {text}: <input \n      value={value}\n      onChange={handler}\n      />\n    </div>\n  )\n}\n\nconst AddForm = (props) => {\n  return (\n    <form onSubmit={props.onSubmit}>\n      <FormInput text='name' \n          value={props.values.name}\n          handler={props.functions.name}\n      />\n      <FormInput text='number'\n          value={props.values.number}\n          handler={props.functions.number}\n      />\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nconst Notification = ({ type,message }) => {\n  const notificationStyle = {\n    color: type ? 'red' : 'green',\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10\n  }\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div style={notificationStyle}>\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newSearch, setNewSearch ] = useState('')\n  const [ notification, setNotification ] = useState([null,null])\n\n  useEffect(() => {\n    console.log('effect')\n    phonebookService\n      .getAll()\n      .then(initialEntries => {\n        setPersons(initialEntries)\n      })\n  }, [])\n\n  const namesToShow = newSearch === ''\n    ? persons\n    : persons.filter( (entry) => {\n      return entry.name.toLowerCase().includes(newSearch.toLowerCase())\n    })\n\n  const handleNewName = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNewNumber = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleSearch = (event) => {\n    console.log(event.target.value)\n    setNewSearch(event.target.value)\n  }\n\n  const handleDelete = (event) => {\n    console.log(event.target.name)\n    if (window.confirm(`Are you sure you want to delete ${persons.find(person => person.id == event.target.name).name}?`)){\n      phonebookService\n        .remove(event.target.name)\n        // then I need to update my new persons\n        .then( () => {\n          const updatedBook = persons.filter((entries) => entries.id != event.target.name)\n          setPersons(updatedBook)\n        })\n    }\n  }\n\n  const addName = (event) => {\n    // prevent the page from reloading\n    event.preventDefault()\n    \n    // Check if name is already in state\n    if (persons.map((entry) => entry.name).includes(newName) ){\n      // confirm if we want to change number\n      if (window.confirm(`${newName} is already added to the phonebook, nerd. Replace the old number with a new one?`)\n      ){\n        // create new person object with name, etc.\n        const entry = persons.find((person) => person.name === newName )\n        const changedEntry = {...entry, number: newNumber}\n\n        phonebookService\n          .update(changedEntry.id,changedEntry)\n          .then( updatedEntry => {\n            setPersons(persons.map(person => person.name !== newName ? person : updatedEntry))\n            setNewName('')\n            setNewNumber('')\n            setNotification([0,`Successfully updated ${changedEntry.name}`])\n            setTimeout(() => {\n              setNotification([null,null])\n            }, 2000)\n          })\n          .catch(error => {\n            // Delete person from state (it was already delete from server)\n            setPersons(persons.filter(n => n.name !== newName))\n            // Reset name and number\n            setNewName('')\n            setNewNumber('')\n            // Set notification and timeout\n            setNotification([1,`Information of ${changedEntry.name} has already been removed from server`])\n            setTimeout(() => {\n              setNotification([null,null])\n            }, 2000)\n          })\n      }\n      else{\n        // clear entry\n        setNewName('')\n        setNewNumber('')\n      }\n    }\n    else{\n      // create new person object with name, etc.\n      const personObject = {\n        name: newName,\n        number: newNumber\n      }\n      // post the new entry to the backend \n      phonebookService\n        .create(personObject)\n        .then(returnedEntry => {\n          // update the persons state with new stuff\n          setPersons(persons.concat(returnedEntry))\n          // reset hooks\n          setNewName('')\n          setNewNumber('')\n          setNotification([0,`Successfully added ${personObject.name}`])\n          setTimeout(() => {\n            setNotification([null,null])\n          }, 2000)\n        })\n      }\n     \n  }\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification type={notification[0]} message={notification[1]} />\n      <Filter value={newSearch}\n          onChange={handleSearch}\n      />\n\n      <h2>add a new</h2>\n\n      <AddForm onSubmit={addName}\n          values={\n            {\n              name:newName,\n              number:newNumber\n            }\n          } \n          functions={\n            {\n              name:handleNewName,\n              number:handleNewNumber\n            }\n          } \n      />\n\n      <h2>Numbers</h2>\n\n      <Entries names={namesToShow} handleDelete={handleDelete} />\n      \n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}